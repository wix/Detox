<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="565px" preserveAspectRatio="none" style="width:598px;height:565px;background:#FFFFFF;" version="1.1" viewBox="0 0 598 565" width="598px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="353.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="148.5" y="112.7988"/><rect fill="#FFFFFF" height="324.416" style="stroke:#181818;stroke-width:1.0;" width="10" x="301.5" y="142.1094"/><rect fill="#FFFFFF" height="146.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="254.3516"/><rect height="222.4844" style="stroke:#000000;stroke-width:1.5;fill:none;" width="488" x="104.5" y="215.7305"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="81.4883" y2="484.5254"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="153.5" x2="153.5" y1="81.4883" y2="484.5254"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="306.5" x2="306.5" y1="81.4883" y2="484.5254"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="489.5" x2="489.5" y1="81.4883" y2="484.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="78.5352">User</text><ellipse cx="23.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,21.5 L23.5,48.5 M10.5,29.5 L36.5,29.5 M23.5,48.5 L10.5,63.5 M23.5,48.5 L36.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="497.0605">User</text><ellipse cx="23.5" cy="508.5137" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,516.5137 L23.5,543.5137 M10.5,524.5137 L36.5,524.5137 M23.5,543.5137 L10.5,558.5137 M23.5,543.5137 L36.5,558.5137 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="114.5" y="78.5352">Jest (main)</text><path d="M133,37 L133,61 M133,49 L150,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="162" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="114.5" y="497.0605">Jest (main)</text><path d="M133,504.0137 L133,528.0137 M133,516.0137 L150,516.0137 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="162" cy="516.0137" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="225.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="232.5" y="70.5352">DetoxPrimaryContext</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="225.5" y="483.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="232.5" y="504.0605">DetoxPrimaryContext</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="397.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="404.5" y="70.5352">DetoxCircusEnvironment</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="397.5" y="483.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="404.5" y="504.0605">DetoxCircusEnvironment</text><rect fill="#FFFFFF" height="353.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="148.5" y="112.7988"/><rect fill="#FFFFFF" height="324.416" style="stroke:#181818;stroke-width:1.0;" width="10" x="301.5" y="142.1094"/><rect fill="#FFFFFF" height="146.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="485" y="254.3516"/><polygon fill="#181818" points="136.5,108.7988,146.5,112.7988,136.5,116.7988,140.5,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="142.5" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="30.5" y="108.0566">jest --runInBand</text><polygon fill="#181818" points="289.5,138.1094,299.5,142.1094,289.5,146.1094,293.5,142.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158.5" x2="295.5" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="165.5" y="137.3672">require('detox')</text><polygon fill="#181818" points="289.5,167.4199,299.5,171.4199,289.5,175.4199,293.5,171.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158.5" x2="295.5" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="165.5" y="166.6777">resolveConfig()</text><polygon fill="#181818" points="289.5,196.7305,299.5,200.7305,289.5,204.7305,293.5,200.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158.5" x2="295.5" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="165.5" y="195.9883">init()</text><path d="M104.5,215.7305 L178.5,215.7305 L178.5,223.041 L168.5,233.041 L104.5,233.041 L104.5,215.7305 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="222.4844" style="stroke:#000000;stroke-width:1.5;" width="488" x="104.5" y="215.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="119.5" y="229.2988">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="193.5" y="228.3652">[every test file]</text><polygon fill="#181818" points="473,250.3516,483,254.3516,473,258.3516,477,254.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158.5" x2="479" y1="254.3516" y2="254.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="165.5" y="249.6094">new()</text><polygon fill="#181818" points="473,279.6621,483,283.6621,473,287.6621,477,283.6621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158.5" x2="479" y1="283.6621" y2="283.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="165.5" y="278.9199">setup()</text><polygon fill="#181818" points="322.5,308.9727,312.5,312.9727,322.5,316.9727,318.5,312.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316.5" x2="484" y1="312.9727" y2="312.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="328.5" y="308.2305">installWorker()</text><polygon fill="#181818" points="473,338.2832,483,342.2832,473,346.2832,477,342.2832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158.5" x2="479" y1="342.2832" y2="342.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="165.5" y="337.541">run test file</text><polygon fill="#181818" points="473,367.5938,483,371.5938,473,375.5938,477,371.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="158.5" x2="479" y1="371.5938" y2="371.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="165.5" y="366.8516">teardown()</text><polygon fill="#181818" points="322.5,396.9043,312.5,400.9043,322.5,404.9043,318.5,400.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="316.5" x2="489" y1="400.9043" y2="400.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="328.5" y="396.1621">uninstallWorker()</text><polygon fill="#181818" points="289.5,426.2148,299.5,430.2148,289.5,434.2148,293.5,430.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="158.5" x2="295.5" y1="430.2148" y2="430.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="165.5" y="425.4727">reportTestResults()</text><polygon fill="#181818" points="294.5,462.5254,304.5,466.5254,294.5,470.5254,298.5,466.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="300.5" y1="466.5254" y2="466.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="160.5" y="461.7832">cleanup()</text><!--MD5=[c9ef7d2ea00ab733dde3d45d5cc6a8d9]
@startuml

actor User
boundary "Jest (main)" as Jest0
participant "DetoxPrimaryContext" as Pri
participant "DetoxCircusEnvironment" as Env

User -> Jest0 : jest - -runInBand
activate Jest0
Jest0 -> Pri: require('detox')
activate Pri
Jest0 -> Pri: resolveConfig()
Jest0 -> Pri: init()
loop every test file
  Jest0 -> Env: new()
  activate Env
  Jest0 -> Env: setup()
  Env -> Pri: installWorker()
  Jest0 -> Env: run test file
  Jest0 -> Env: teardown()
  Env -> Pri: uninstallWorker()
  deactivate Env
  Jest0 - -> Pri: reportTestResults()
end loop
Jest0 -> Pri: cleanup()
deactivate Pri
deactivate Jest0

@enduml

PlantUML version 1.2022.6(Tue Jun 21 20:34:49 EEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: UA
--></g></svg>