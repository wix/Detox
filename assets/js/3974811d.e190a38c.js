"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[7696],{11470:(e,n,a)=>{a.d(n,{A:()=>x});var t=a(58168),r=a(96540),l=a(20053),i=a(23104),o=a(56347),s=a(57485),u=a(31682),p=a(89466);function d(e){return function(e){return r.Children.map(e,e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}(e).map(({props:{value:e,label:n,attributes:a,default:t}})=>({value:e,label:n,attributes:a,default:t}))}function g(e){const{values:n,children:a}=e;return(0,r.useMemo)(()=>{const e=n??d(a);return function(e){const n=(0,u.X)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,a])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function c({queryString:e=!1,groupId:n}){const a=(0,o.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,s.aZ)(t),(0,r.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(a.location.search);n.set(t,e),a.replace({...a.location,search:n.toString()})},[t,a])]}function y(e){const{defaultValue:n,queryString:a=!1,groupId:t}=e,l=g(e),[i,o]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=n.find(e=>e.default)??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:l})),[s,u]=c({queryString:a,groupId:t}),[d,y]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,t]=(0,p.Dv)(n);return[a,(0,r.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),b=(()=>{const e=s??d;return m({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)(()=>{b&&o(b)},[b]);return{selectedValue:i,selectValue:(0,r.useCallback)(e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),y(e)},[u,y,l]),tabValues:l}}var b=a(92303);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v({className:e,block:n,selectedValue:a,selectValue:o,tabValues:s}){const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.a_)(),d=e=>{const n=e.currentTarget,t=u.indexOf(n),r=s[t].value;r!==a&&(p(n),o(r))},g=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=u.indexOf(e.currentTarget)+1;n=u[a]??u[0];break}case"ArrowLeft":{const a=u.indexOf(e.currentTarget)-1;n=u[a]??u[u.length-1];break}}n?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":n},e)},s.map(({value:e,label:n,attributes:i})=>r.createElement("li",(0,t.A)({role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,key:e,ref:e=>u.push(e),onKeyDown:g,onClick:d},i,{className:(0,l.A)("tabs__item",h.tabItem,i?.className,{"tabs__item--active":a===e})}),n??e)))}function f({lazy:e,children:n,selectedValue:a}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===a);return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},t.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})))}function N(e){const n=y(e);return r.createElement("div",{className:(0,l.A)("tabs-container",h.tabList)},r.createElement(v,(0,t.A)({},e,n)),r.createElement(f,(0,t.A)({},e,n)))}function x(e){const n=(0,b.A)();return r.createElement(N,(0,t.A)({key:String(n)},e))}},15680:(e,n,a)=>{a.d(n,{xA:()=>p,yg:()=>c});var t=a(96540);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach(function(n){r(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function o(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},l=Object.keys(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=t.createContext({}),u=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},p=function(e){var n=u(e.components);return t.createElement(s.Provider,{value:n},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef(function(e,n){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(a),m=r,c=d["".concat(s,".").concat(m)]||d[m]||g[m]||l;return a?t.createElement(c,i(i({ref:n},p),{},{components:a})):t.createElement(c,i({ref:n},p))});function c(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[d]="string"==typeof e?e:r,i[1]=o;for(var u=2;u<l;u++)i[u]=a[u];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},19365:(e,n,a)=>{a.d(n,{A:()=>i});var t=a(96540),r=a(20053);const l={tabItem:"tabItem_Ymn6"};function i({children:e,hidden:n,className:a}){return t.createElement("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,a),hidden:n},e)}},28350:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>u,toc:()=>d});var t=a(58168),r=(a(96540),a(15680)),l=a(11470),i=a(19365);const o={id:"contributing",slug:"contributing",title:"Contributing",sidebar_label:"Contributing"},s=void 0,u={unversionedId:"contributing",id:"version-19.x/contributing",title:"Contributing",description:"Contributing",source:"@site/versioned_docs/version-19.x/Guide.Contributing.md",sourceDirName:".",slug:"/contributing",permalink:"/Detox/docs/19.x/contributing",draft:!1,editUrl:"https://github.com/wix/Detox/edit/master/docs/versioned_docs/version-19.x/Guide.Contributing.md",tags:[],version:"19.x",frontMatter:{id:"contributing",slug:"contributing",title:"Contributing",sidebar_label:"Contributing"},sidebar:"tutorialSidebar",previous:{title:"Uninstalling Detox",permalink:"/Detox/docs/19.x/guide/uninstalling"}},p={},d=[{value:"Contributing",id:"contributing",level:2},{value:"Environment",id:"environment",level:3},{value:"Install Homebrew",id:"install-homebrew",level:4},{value:"Install Node.js v12.x or newer",id:"install-nodejs-v12x-or-newer",level:4},{value:"Install <code>npm</code>",id:"install-npm",level:4},{value:"Install the monorepo management tool, <code>lerna</code>",id:"install-the-monorepo-management-tool-lerna",level:4},{value:"Install common React Native dependencies",id:"install-common-react-native-dependencies",level:4},{value:"iOS",id:"ios",level:4},{value:"Android",id:"android",level:4},{value:"Detox",id:"detox",level:3},{value:"Clone Detox and Submodules",id:"clone-detox-and-submodules",level:4},{value:"Installing and Linking Internal Projects",id:"installing-and-linking-internal-projects",level:4},{value:"Building and Testing",id:"building-and-testing",level:4},{value:"Automatically",id:"automatically",level:5},{value:"Manually",id:"manually",level:5},{value:"0. (React Native \u2264 0.55.x) Fixing Compilation Issues in RN Sources",id:"0-react-native--055x-fixing-compilation-issues-in-rn-sources",level:6},{value:"1. Unit Tests and Lint",id:"1-unit-tests-and-lint",level:6},{value:"2. Running Detox E2E Coverage Tests",id:"2-running-detox-e2e-coverage-tests",level:6},{value:"3. Android Native Unit-Tests",id:"3-android-native-unit-tests",level:6},{value:"Detox - Example Projects",id:"detox---example-projects",level:3},{value:"Detox Documentation Website",id:"detox-documentation-website",level:3},{value:"Updating the Website",id:"updating-the-website",level:4},{value:"Website Deployment",id:"website-deployment",level:5},{value:"Update Old Versions",id:"update-old-versions",level:5}],g={toc:d},m="wrapper";function c({components:e,...n}){return(0,r.yg)(m,(0,t.A)({},g,n,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"contributing"},"Contributing"),(0,r.yg)("p",null,"This guide is about contributing to our codebase."),(0,r.yg)("p",null,"We don\u2019t have any special guidelines - just some setup walk-through!"),(0,r.yg)("h3",{id:"environment"},"Environment"),(0,r.yg)("h4",{id:"install-homebrew"},"Install Homebrew"),(0,r.yg)("p",null,"If you haven\u2019t yet - install ",(0,r.yg)("a",{parentName:"p",href:"https://brew.sh/"},(0,r.yg)("inlineCode",{parentName:"a"},"brew")),"."),(0,r.yg)("h4",{id:"install-nodejs-v12x-or-newer"},"Install Node.js v12.x or newer"),(0,r.yg)("p",null,"There\u2019s more than one way to install Node.js:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Download from the ",(0,r.yg)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"official download page")),(0,r.yg)("li",{parentName:"ul"},"Use ",(0,r.yg)("a",{parentName:"li",href:"https://formulae.brew.sh/formula/node"},"Homebrew")),(0,r.yg)("li",{parentName:"ul"},"Use ",(0,r.yg)("inlineCode",{parentName:"li"},"nvm")," - if you need to allow for several versions to be installed on a single machine")),(0,r.yg)("p",null,"The best way is to use ",(0,r.yg)("inlineCode",{parentName:"p"},"nvm"),", but the simplest way is to use Homebrew:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"brew install node\n")),(0,r.yg)("h4",{id:"install-npm"},"Install ",(0,r.yg)("inlineCode",{parentName:"h4"},"npm")),(0,r.yg)("p",null,"Either install ",(0,r.yg)("inlineCode",{parentName:"p"},"npm")," or check that you have it installed, using their ",(0,r.yg)("a",{parentName:"p",href:"https://docs.npmjs.com/downloading-and-installing-node-js-and-npm"},"official guide"),"."),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"NOTE: For Detox, please use the latest ",(0,r.yg)("inlineCode",{parentName:"strong"},"npm")," version ",(0,r.yg)("inlineCode",{parentName:"strong"},"6.x.x")," (i.e not version 7.0.0 or newer)."))),(0,r.yg)("h4",{id:"install-the-monorepo-management-tool-lerna"},"Install the monorepo management tool, ",(0,r.yg)("inlineCode",{parentName:"h4"},"lerna")),(0,r.yg)(l.A,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.yg)(i.A,{value:"npm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"npm install lerna@3.x.x --global\n"))),(0,r.yg)(i.A,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"yarn global add lerna@3.x.x\n"))),(0,r.yg)(i.A,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"pnpm add lerna@3.x.x --global\n")))),(0,r.yg)("p",null,"For all the internal projects (detox, detox-cli, demos, test) ",(0,r.yg)("inlineCode",{parentName:"p"},"lerna")," will create symbolic links in ",(0,r.yg)("inlineCode",{parentName:"p"},"node_modules")," instead of ",(0,r.yg)("inlineCode",{parentName:"p"},"npm")," copying the content of the projects. This way, any change you do on any code is there immediately. There is no need to update node modules or copy files between projects."),(0,r.yg)("h4",{id:"install-common-react-native-dependencies"},"Install common React Native dependencies"),(0,r.yg)("p",null,"React-Native CLI:"),(0,r.yg)(l.A,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.yg)(i.A,{value:"npm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"npm install react-native-cli --global\n"))),(0,r.yg)(i.A,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"yarn global add react-native-cli\n"))),(0,r.yg)(i.A,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"pnpm add react-native-cli --global\n")))),(0,r.yg)("p",null,"Watchman:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"brew install watchman\n")),(0,r.yg)("h4",{id:"ios"},"iOS"),(0,r.yg)("p",null,"For iOS, you must install Xcode and related tools. Refer to our ",(0,r.yg)("a",{parentName:"p",href:"/Detox/docs/19.x/introduction/ios-dev-env"},"Setting Up an iOS Environment")," guide."),(0,r.yg)("p",null,"You must also have ",(0,r.yg)("inlineCode",{parentName:"p"},"xcpretty")," installed:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"gem install xcpretty\n")),(0,r.yg)("h4",{id:"android"},"Android"),(0,r.yg)("p",null,"For Android, you need to have Java and the Android SDK properly set up. Refer to our ",(0,r.yg)("a",{parentName:"p",href:"/Detox/docs/19.x/introduction/android-dev-env"},"Setting Up an Android Development & Testing Environment")," guide."),(0,r.yg)("h3",{id:"detox"},"Detox"),(0,r.yg)("h4",{id:"clone-detox-and-submodules"},"Clone Detox and Submodules"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"git clone git@github.com:wix/detox.git\ncd detox\ngit submodule update --init --recursive\n")),(0,r.yg)("p",null,"(this makes sure all git submodule dependencies have been properly checked out)"),(0,r.yg)("h4",{id:"installing-and-linking-internal-projects"},"Installing and Linking Internal Projects"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"lerna bootstrap\n")),(0,r.yg)("h4",{id:"building-and-testing"},"Building and Testing"),(0,r.yg)("h5",{id:"automatically"},"Automatically"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"scripts/ci.ios.sh")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"scripts/ci.android.sh")," are the scripts Detox runs in CI, they will run ",(0,r.yg)("inlineCode",{parentName:"p"},"lerna bootstrap"),", unit tests, and E2E tests. Make sure these scripts pass before submitting a PR, this is exactly what Detox is going to run in CI."),(0,r.yg)("h5",{id:"manually"},"Manually"),(0,r.yg)("p",null,"The following steps can be run manually in order to build / test the various components of Detox."),(0,r.yg)("h6",{id:"0-react-native--055x-fixing-compilation-issues-in-rn-sources"},"0. (React Native \u2264 0.55.x) Fixing Compilation Issues in RN Sources"),(0,r.yg)("p",null,"Detox Android test project uses React Native sources instead of the precompiled AAR. The test project uses React Native 0.51 and 0.53, both have issues with compilation (",(0,r.yg)("a",{parentName:"p",href:"https://github.com/facebook/react-native/commit/d8bb990abc226e778e2f32c2de3c6661c0aa64e5#diff-f44163238d434a443b56bd27b3ba0578"},"fixed in 0.55"),"). In order to fix this issue, from inside ",(0,r.yg)("inlineCode",{parentName:"p"},"detox/test")," run:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"mv node_modules/react-native/ReactAndroid/release.gradle node_modules/react-native/ReactAndroid/release.gradle.bak\n")),(0,r.yg)("h6",{id:"1-unit-tests-and-lint"},"1. Unit Tests and Lint"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"lerna run test\n")),(0,r.yg)("p",null,"Detox JS code is 100% test covered and is set to break the build if coverage gets below, so make sure you run unit tests (",(0,r.yg)("inlineCode",{parentName:"p"},"lerna run test"),") locally before pushing."),(0,r.yg)("p",null,"Alternatively, to run only the JS tests, run the following from the ",(0,r.yg)("inlineCode",{parentName:"p"},"detox/detox")," directory:"),(0,r.yg)(l.A,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.yg)(i.A,{value:"npm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"npm run unit\n"))),(0,r.yg)(i.A,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"yarn unit\n"))),(0,r.yg)(i.A,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"pnpm run unit\n")))),(0,r.yg)("p",null,"or"),(0,r.yg)(l.A,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.yg)(i.A,{value:"npm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"npm run unit:watch\n"))),(0,r.yg)(i.A,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"yarn unit:watch\n"))),(0,r.yg)(i.A,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"pnpm run unit:watch\n")))),(0,r.yg)("p",null,"After running the tests, ",(0,r.yg)("em",{parentName:"p"},"Jest")," will create a coverage report you can examine:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"cd detox\nopen coverage/lcov-report/index.html\n")),(0,r.yg)("h6",{id:"2-running-detox-e2e-coverage-tests"},"2. Running Detox E2E Coverage Tests"),(0,r.yg)("p",null,'Detox has a suite of end-to-end tests to test its own API while developing (and for regression); We maintain a special application that is "tested" against Detox\u2019s API, but essentially, it\u2019s the API that is tested, not the app.'),(0,r.yg)("p",null,"To run the tests, you must first build the native code and then run based on your target of choice (Android / iOS):"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"iOS:")),(0,r.yg)(l.A,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.yg)(i.A,{value:"npm",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cd detox/test\nnpm run build:ios\nnpm run e2e:ios\n"))),(0,r.yg)(i.A,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cd detox/test\nyarn build:ios\nyarn e2e:ios\n"))),(0,r.yg)(i.A,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cd detox/test\npnpm run build:ios\npnpm run e2e:ios\n"))))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Android:")),(0,r.yg)(l.A,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.yg)(i.A,{value:"npm",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cd detox/test\nnpm run build:android\nnpm run e2e:android\n"))),(0,r.yg)(i.A,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cd detox/test\nyarn build:android\nyarn e2e:android\n"))),(0,r.yg)(i.A,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cd detox/test\npnpm run build:android\npnpm run e2e:android\n")))))),(0,r.yg)("p",null,"FYI Android test project includes two flavors:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"fromBin")," - (",(0,r.yg)("strong",{parentName:"li"},"standard use case"),") utilizes the precompiled ",(0,r.yg)("inlineCode",{parentName:"li"},".aar")," from ",(0,r.yg)("inlineCode",{parentName:"li"},"node_modules")," just like a standard RN project."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"fromSource")," - compiles the project with RN sources from ",(0,r.yg)("inlineCode",{parentName:"li"},"node_modules"),", this is useful when developing and debugging Espresso idle resource.\n",(0,r.yg)("a",{parentName:"li",href:"https://github.com/facebook/react-native/wiki/Building-from-source#android"},"Here")," are the prerequisites to compiling React Native from source.")),(0,r.yg)("p",null,"Each build can be triggered separately by running its Gradle assembling task (under ",(0,r.yg)("inlineCode",{parentName:"p"},"detox/test/android/"),"):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"./gradlew assembleFromSourceDebug\n-or-\n./gradlew assembleFromBinDebug\n")),(0,r.yg)("p",null,"To run from Android Studio, React Native\u2019s ",(0,r.yg)("inlineCode",{parentName:"p"},"react.gradle")," script may require ",(0,r.yg)("inlineCode",{parentName:"p"},"node")," to be in path.\nOn MacOS, environment variables can be exported to desktop applications by adding the following to your ",(0,r.yg)("inlineCode",{parentName:"p"},".bashrc"),"/",(0,r.yg)("inlineCode",{parentName:"p"},".zshrc"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"launchctl setenv PATH $PATH\n")),(0,r.yg)("h6",{id:"3-android-native-unit-tests"},"3. Android Native Unit-Tests"),(0,r.yg)("p",null,"Under ",(0,r.yg)("inlineCode",{parentName:"p"},"detox/android"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"./gradlew testFullRelease\n")),(0,r.yg)("h3",{id:"detox---example-projects"},"Detox - Example Projects"),(0,r.yg)("p",null,"This is in fact a monorepo that also sports some example projects (for usage reference), alongside the main test project:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"examples/demo-react-native")," and ",(0,r.yg)("inlineCode",{parentName:"li"},"examples/demo-react-native-jest"),": Demonstrate usage of Detox in React-Native app projects, with ",(0,r.yg)("inlineCode",{parentName:"li"},"mocha.js")," and ",(0,r.yg)("inlineCode",{parentName:"li"},"Jest")," as the hosting test-runner frameworks, respectively."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"examples/demo-native-ios"),": Demonstrates usage of Detox in a pure-native iOS app."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"examples/demo-native-android")," (broken): Demonstrates usage of Detox in a pure-native Android app."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"examples/demo-pure-native-android"),": Demonstrates usage of the ",(0,r.yg)("em",{parentName:"li"},"pure")," ",(0,r.yg)("a",{parentName:"li",href:"https://github.com/wix/Detox/tree/master/detox-native/README.md"},"Detox-Native")," project"),(0,r.yg)("li",{parentName:"ul"},"more...")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"In order to run E2E tests associated with any of these projects, refer to the ",(0,r.yg)("a",{parentName:"strong",href:"https://github.com/wix/Detox/tree/master/examples"},"project-specific")," READMEs.")),(0,r.yg)("h3",{id:"detox-documentation-website"},"Detox Documentation Website"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://wix.github.io/Detox"},"documentation website")," is built using ",(0,r.yg)("a",{parentName:"p",href:"https://docusaurus.io/"},"Docusaurus"),"."),(0,r.yg)("p",null,"To run the website locally, run the following commands:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"cd website\nnpm install\nnpm start\n")),(0,r.yg)("h4",{id:"updating-the-website"},"Updating the Website"),(0,r.yg)("p",null,"To update a specific page, edit the corresponding markdown file in ",(0,r.yg)("inlineCode",{parentName:"p"},"docs/"),". To add a new page, create a new markdown file in ",(0,r.yg)("inlineCode",{parentName:"p"},"docs/")," and add a link to it in ",(0,r.yg)("inlineCode",{parentName:"p"},"website/sidebars.json"),"."),(0,r.yg)("h5",{id:"website-deployment"},"Website Deployment"),(0,r.yg)("p",null,"While changes to the website are published automatically on every commit to ",(0,r.yg)("inlineCode",{parentName:"p"},"master")," under the ",(0,r.yg)("inlineCode",{parentName:"p"},"Next")," version, tagging and locking docs to a specific version is done automatically on every Detox release."),(0,r.yg)("p",null,"In case you want to update the docs for a specific version, you can change the related files and code under ",(0,r.yg)("inlineCode",{parentName:"p"},"website/versioned_docs/version-<version>/")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"website/versioned_sidebars/version-<version>-sidebars.json"),"."),(0,r.yg)("h5",{id:"update-old-versions"},"Update Old Versions"),(0,r.yg)("p",null,"To update a specific version with the latest changes:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Remove the version from ",(0,r.yg)("inlineCode",{parentName:"li"},"versions.json"),"."),(0,r.yg)("li",{parentName:"ol"},"Run ",(0,r.yg)("inlineCode",{parentName:"li"},"npm run docusaurus docs:version <version>"),".")))}c.isMDXComponent=!0}}]);