"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2068],{7705:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/passTestID-11f72c3a0d97eff6a62c5591ae0ea1da.png"},15680:(e,t,n)=>{n.d(t,{xA:()=>m,yg:()=>g});var a=n(96540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef(function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),c=p(n),d=i,g=c["".concat(l,".").concat(d)]||c[d]||u[d]||o;return n?a.createElement(g,s(s({ref:t},m),{},{components:n})):a.createElement(g,s({ref:t},m))});function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=d;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[c]="string"==typeof e?e:i,s[1]=r;for(var p=2;p<o;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},43948:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/repetitiveComponentTestID-6fffa71a68b1f2015a4e8b96ece1e0e3.png"},66913:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>p});var a=n(58168),i=(n(96540),n(15680));const o={},s="Adding test ID's to your components",r={unversionedId:"guide/test-id",id:"guide/test-id",title:"Adding test ID's to your components",description:"This guide was written primarily for React Native apps, but it can be generalized for testing any app, including native apps.",source:"@site/../docs/guide/test-id.md",sourceDirName:"guide",slug:"/guide/test-id",permalink:"/Detox/docs/next/guide/test-id",draft:!1,editUrl:"https://github.com/wix/Detox/edit/master/docs/../docs/guide/test-id.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Preparing for CI",permalink:"/Detox/docs/next/introduction/preparing-for-ci"},next:{title:"Parallel Test Execution",permalink:"/Detox/docs/next/guide/parallel-test-execution"}},l={},p=[{value:"Pass testID to your native components",id:"pass-testid-to-your-native-components",level:2},{value:"Child elements",id:"child-elements",level:3},{value:"Repetitive components",id:"repetitive-components",level:3},{value:"Finding your test ID",id:"finding-your-test-id",level:2},{value:"Test ID naming - Best practices",id:"test-id-naming---best-practices",level:2},{value:"Use a consistent naming system",id:"use-a-consistent-naming-system",level:3},{value:"Use simple names",id:"use-simple-names",level:3},{value:"Dissociate test ID names",id:"dissociate-test-id-names",level:3},{value:"Examples",id:"examples",level:3}],m={toc:p},c="wrapper";function u({components:e,...t}){return(0,i.yg)(c,(0,a.A)({},m,t,{components:e,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"adding-test-ids-to-your-components"},"Adding test ID's to your components"),(0,i.yg)("admonition",{title:"Note",type:"info"},(0,i.yg)("p",{parentName:"admonition"},"This guide was written primarily for React Native apps, but it can be generalized for testing any app, including native apps.")),(0,i.yg)("p",null,"While ",(0,i.yg)("a",{parentName:"p",href:"/Detox/docs/next/api/matchers"},"view-element matching")," can be done in numerous ways, it is always the best idea to match based on something unique and decoupled, as it ensures that the test code is clear, stable and sustainable over time."),(0,i.yg)("p",null,"We recommend assigning unique test ID's to the elements you're aiming to interact with in your tests, and preferring matching based on those rather than on anything else. Test ID's are the least likely to change over time (compared with raw text, for example), and are locale-agnostic. Furthermore, utilizing unique test ID's across the app not only simplifies the identification and interaction with specific elements but also enhances code navigability, making it easier to locate elements when traversing the codebase."),(0,i.yg)("p",null,"In React Native applications, ",(0,i.yg)("inlineCode",{parentName:"p"},"View")," components have a dedicated ",(0,i.yg)("a",{parentName:"p",href:"https://reactnative.dev/docs/view#testid"},"test ID property")," that can be utilized:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-jsx"},'<View>\n  <TouchableOpacity testID="Onboarding.Next_button">\n    <Text>Next</Text>\n  </TouchableOpacity>\n</View>\n')),(0,i.yg)("p",null,"For native apps, test ID's can be assigned by setting a value for the following properties:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"iOS:")," ",(0,i.yg)("a",{parentName:"li",href:"https://developer.apple.com/documentation/uikit/uiaccessibilityidentification/1623132-accessibilityidentifier"},(0,i.yg)("inlineCode",{parentName:"a"},"accessibilityIdentifier"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Android:")," Default ",(0,i.yg)("a",{parentName:"li",href:"https://developer.android.com/reference/android/view/View#tags"},"viewTag"))),(0,i.yg)("h2",{id:"pass-testid-to-your-native-components"},"Pass testID to your native components"),(0,i.yg)("p",null,"Passing a ",(0,i.yg)("inlineCode",{parentName:"p"},"testID")," to your custom component props has no effect until you forward it down to a native component like ",(0,i.yg)("inlineCode",{parentName:"p"},"<View />")," or ",(0,i.yg)("inlineCode",{parentName:"p"},"<TouchableOpacity />"),"\nthat implements rendering it as an accessibility identifier in the native component hierarchy:"),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Pass testID to native component",src:n(7705).A,width:"2116",height:"358"})),(0,i.yg)("p",null,"For example, you have ",(0,i.yg)("inlineCode",{parentName:"p"},"<YourCustomComponent />")," and you pass a ",(0,i.yg)("inlineCode",{parentName:"p"},"testID")," to it:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="YourScreen.jsx"',title:'"YourScreen.jsx"'},'function YourScreen() {\n  return (\n    <YourCustomComponent testID="YourCustomComponent" />\n  );\n}\n')),(0,i.yg)("p",null,"Make sure that your implementation passes ",(0,i.yg)("inlineCode",{parentName:"p"},"testID")," to some React Native component that supports it:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="YourCustomComponent.jsx"',title:'"YourCustomComponent.jsx"'},"function YourCustomComponent(props) {\n  return (\n// highlight-next-line\n    <View testID={props.testID}>\n      <Text>Some text</Text>\n    </View>\n  );\n}\n")),(0,i.yg)("h3",{id:"child-elements"},"Child elements"),(0,i.yg)("p",null,"If your component has several useful child elements, it is even a better idea to assign them some derived test IDs, e.g.:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="YourCustomComponent.jsx"',title:'"YourCustomComponent.jsx"'},"function YourCustomComponent(props) {\n  return (\n// highlight-next-line\n    <View testID={props.testID}>\n      <Text testID={`${props.testID}.label`}>Some text</Text>\n    </View>\n  );\n}\n")),(0,i.yg)("p",null,"That way, you could refer to specific elements in Detox tests via the most basic and least ambiguous ",(0,i.yg)("inlineCode",{parentName:"p"},"by.id")," matchers, e.g.:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"expect(element(by.id('YourCustomComponent'))).toBeVisible();\nexpect(element(by.id('YourCustomComponent.label'))).toHaveText('Some text');\n")),(0,i.yg)("h3",{id:"repetitive-components"},"Repetitive components"),(0,i.yg)("p",null,"It is highly not recommended to use non-unique ",(0,i.yg)("inlineCode",{parentName:"p"},"testID"),", e.g. when your components get rendered in any sort of repeater or virtualized list:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="YourScreen.jsx"',title:'"YourScreen.jsx"'},"const ITEMS = [\n  { title: 'First Item' },\n  { title: 'Second Item' },\n  { title: 'Third Item' },\n];\n\nfunction YourScreen() {\n  const renderItem = ({ item }) => (\n// highlight-next-line\n    <YourCustomComponent testID={'listItem'} label={item.title} />\n  );\n\n  return (\n      <FlatList\n        data={ITEMS}\n        renderItem={renderItem}\n      />\n  );\n}\n")),(0,i.yg)("p",null,"This would be a violation of accessibility guidelines and unnecessary complication for your test matchers.\nYou\u2019d also have to use extra matchers and ",(0,i.yg)("inlineCode",{parentName:"p"},".atIndex")," clarification:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"expect(element(by.id('listItem')).atIndex(2)).toHaveText('Third Item');\n")),(0,i.yg)("p",null,"Instead, you could generate a unique ",(0,i.yg)("inlineCode",{parentName:"p"},"testID")," for every list item with the ",(0,i.yg)("inlineCode",{parentName:"p"},"index")," property:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-jsx"},"  const renderItem = ({ item, index }) => (\n    <YourCustomComponent testID={`listItem.${index + 1}`} label={item.title} />\n  );\n")),(0,i.yg)("p",null,"That way, your assertion would become simpler and more deterministic:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"expect(element(by.id('listItem.3'))).toHaveText('Third Item');\n")),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"testID for repetitive components",src:n(43948).A,width:"2117",height:"624"})),(0,i.yg)("h2",{id:"finding-your-test-id"},"Finding your test ID"),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Incorrect or absent ",(0,i.yg)("inlineCode",{parentName:"p"},"testID")," is a common cause for test failure.\nIf your test can't find your ",(0,i.yg)("inlineCode",{parentName:"p"},"testID")," and you can't see it either using tools described below, that usually means you haven't passed it down to this component.\nMake sure you keep forwarding it down until it reaches a native component.")),(0,i.yg)("p",null,"To make sure your ",(0,i.yg)("inlineCode",{parentName:"p"},"testID")," is indeed rendered in your app, you can use such tools as MacOS' built-in ",(0,i.yg)("a",{parentName:"p",href:"https://developer.apple.com/documentation/accessibility/inspecting-the-accessibility-of-screens"},"accessibility inspector")," for iOS, and ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/wix-incubator/detox-inspector"},"Detox Layout-inspector")," (setup required) for Android."),(0,i.yg)("h2",{id:"test-id-naming---best-practices"},"Test ID naming - Best practices"),(0,i.yg)("p",null,"Test ID's work best when they are unique, simple and concise. Here are our recommendations regarding what rules to follow in terms of naming."),(0,i.yg)("h3",{id:"use-a-consistent-naming-system"},"Use a consistent naming system"),(0,i.yg)("p",null,"Decide upon a system by which test ID's are named, and stick with it."),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Use a consistent naming convention. An ",(0,i.yg)("inlineCode",{parentName:"p"},"ITEM_NAME_ALL_CAPS")," convention and an ",(0,i.yg)("inlineCode",{parentName:"p"},"ItemNameUpperCamelCase")," are both ok, but ",(0,i.yg)("strong",{parentName:"p"},"don't use them either intermittently nor in conjunction:")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ROOT")," & ",(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ITEM_1")," - :white","_","check","_","mark:"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ROOT")," & ",(0,i.yg)("inlineCode",{parentName:"li"},"SiteList_Item1")," - \u274c"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_Item1")," - \u274c"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Consistently apply notations for special items. For example:"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"A ",(0,i.yg)("inlineCode",{parentName:"li"},"_ROOT")," postfix for screen-root or list-root items (e.g. ",(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ROOT"),")"),(0,i.yg)("li",{parentName:"ul"},"A ",(0,i.yg)("inlineCode",{parentName:"li"},"_BTN")," for buttons / touchable CTA elements"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Apply consistent prefixes as categories in order to introduce a top-level context to the test ID, distinguishing it from similar ones in various places in the app. The name of the associated screen can be useful in that sense. For example: ",(0,i.yg)("inlineCode",{parentName:"p"},"EDIT_PROFILE_SCREEN.DONE_BTN")," is better than just ",(0,i.yg)("inlineCode",{parentName:"p"},"DONE_BTN")," for a button that is inside a user profile editing screen. Also, things such as ",(0,i.yg)("inlineCode",{parentName:"p"},"NAV_TABS."),", ",(0,i.yg)("inlineCode",{parentName:"p"},"TOP_TABS.")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"SIDE_MENU.")," can be used as good context providers.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"As explained in the section on passing test ID's to ",(0,i.yg)("em",{parentName:"p"},"child")," elements, drill down to the details of elements via a ",(0,i.yg)("em",{parentName:"p"},"chain of contexts"),'. Given the parent element-group of an element (for example, a card in a feed), use its own test ID as a prefix for the sub-items (e.g. an options "meatballs" / "kebab" CTA or an ',(0,i.yg)("em",{parentName:"p"},"edit")," button). For example:"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ITEM1")," \u21d2",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ITEM1.OPTIONS")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ITEM1.EDIT_BTN")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ITEM1.TITLE")))))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"In a large-scale, multi-module environment, apply a consistent module identifier as the module's test ID's prefix. For example:"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"AUTH.LOGIN_SCREEN.EDIT_PASSWORD")," - the ",(0,i.yg)("inlineCode",{parentName:"li"},"AUTH.")," prefix suggests that were are under the context of a module handling Authentication matters.")))),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"Don't hesitate to articulate a well defined conventions manifest that all teams should adhere to.")),(0,i.yg)("h3",{id:"use-simple-names"},"Use simple names"),(0,i.yg)("p",null,"Stick to simple alpha-numeric characters, and simple separators. When it comes to test ID's, there's usually no reason to use special characters or emojis."),(0,i.yg)("p",null,"In addition, use test ID that clearly describe the associated element, but are also concise. For example:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST_ROOT")," - :white","_","check","_","mark:"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"MAIN_SITE_LIST_WRAPPER_ELEMENT")," - \u274c"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"SITE_LIST@ITEM$1")," - \u274c")),(0,i.yg)("h3",{id:"dissociate-test-id-names"},"Dissociate test ID names"),(0,i.yg)("p",null,"Make sure the names you give test ID's are completely decoupled and dissociated from everything else in the system. In particular -"),(0,i.yg)("admonition",{title:"Attention",type:"warning"},(0,i.yg)("p",{parentName:"admonition"},"By all means, ",(0,i.yg)("strong",{parentName:"p"},"never utilize the element's text / label in the naming of a test ID!"),"\nNamely, a test ID should never use ",(0,i.yg)("inlineCode",{parentName:"p"},"text")," or ",(0,i.yg)("inlineCode",{parentName:"p"},"label")," props passed to a React Native component.")),(0,i.yg)("p",null,"There are at least 2 reasons why this is a very important rule:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"Alternation of test ID's can lead to broken tests (test-ID based matchers become obsolete), and on-screen text can change frequently."),(0,i.yg)("li",{parentName:"ol"},"In apps supporting multiple languages, the on-screen text is likely to be different in each language. You want the same test code to be compatible with any language set into the test device, and you therefore need it have as little awareness to it as possible. Using test ID's is the best means to keep it that way.")),(0,i.yg)("h3",{id:"examples"},"Examples"),(0,i.yg)("p",null,"Based on the ",(0,i.yg)("inlineCode",{parentName:"p"},"ALL_CAPS")," convention, here is an example of a screen which test ID's illustrate the principles of this discussion:"),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"Test ID: Naming example",src:n(99204).A,width:"1083",height:"1105"})))}u.isMDXComponent=!0},99204:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/naming-example-42987c3697b6b78a3ae705fb15ea7a48.png"}}]);