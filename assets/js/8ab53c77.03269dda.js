"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1513],{15680:(e,t,r)=>{r.d(t,{xA:()=>u,yg:()=>g});var o=r(96540);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=o.createContext({}),c=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef(function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(r),m=n,g=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return r?o.createElement(g,a(a({ref:t},u),{},{components:r})):o.createElement(g,a({ref:t},u))});function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:n,a[1]=s;for(var c=2;c<i;c++)a[c]=r[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}m.displayName="MDXCreateElement"},71316:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=r(58168),n=(r(96540),r(15680));const i={},a="Artifacts",s={unversionedId:"troubleshooting/artifacts",id:"version-20.x/troubleshooting/artifacts",title:"Artifacts",description:"Video Recording Issues on CI",source:"@site/versioned_docs/version-20.x/troubleshooting/artifacts.md",sourceDirName:"troubleshooting",slug:"/troubleshooting/artifacts",permalink:"/Detox/docs/troubleshooting/artifacts",draft:!1,editUrl:"https://github.com/wix/Detox/edit/master/docs/versioned_docs/version-20.x/troubleshooting/artifacts.md",tags:[],version:"20.x",frontMatter:{}},l={},c=[{value:"Video Recording Issues on CI",id:"video-recording-issues-on-ci",level:2},{value:"Detox Instruments is Installed in a Custom Location",id:"detox-instruments-is-installed-in-a-custom-location",level:2},{value:"<code>Ctrl+C</code> Does Not Clean Up Temporary Files",id:"ctrlc-does-not-clean-up-temporary-files",level:2}],u={toc:c},p="wrapper";function d({components:e,...t}){return(0,n.yg)(p,(0,o.A)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"artifacts"},"Artifacts"),(0,n.yg)("h2",{id:"video-recording-issues-on-ci"},"Video Recording Issues on CI"),(0,n.yg)("p",null,"For iOS, you might be getting errors on CI similar to this:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-plain",metastring:"text",text:!0},'Error: Error Domain=NSPOSIXErrorDomain Code=22 "Invalid argument" UserInfo={NSLocalizedDescription=Video recording requires hardware Metal capability.}.\n')),(0,n.yg)("p",null,"Unfortunately, this error is beyond our reach. To fix it, you have to enable hardware acceleration on your build machine, or just disable video recording on CI if it is not possible to turn on the acceleration."),(0,n.yg)("p",null,"There might be a similar issue on Android when the screen recording process exits with an error on CI. While the solution might be identical to the one above, also you might try to experiment with other emulator devices and Android OS versions to see if it helps."),(0,n.yg)("h2",{id:"detox-instruments-is-installed-in-a-custom-location"},"Detox Instruments is Installed in a Custom Location"),(0,n.yg)("p",null,"If you have to use ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/wix/DetoxInstruments"},"Detox Instruments")," installed in a custom location, you can point Detox to it with the ",(0,n.yg)("inlineCode",{parentName:"p"},"DETOX_INSTRUMENTS_PATH")," environment variable, as shown below:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},'DETOX_INSTRUMENTS_PATH="/path/to/Detox Instruments.app" detox test ...\n')),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("strong",{parentName:"p"},"Note:")," If ",(0,n.yg)("strong",{parentName:"p"},"Detox Instruments")," had been ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/wix/DetoxInstruments/blob/master/Documentation/XcodeIntegrationGuide.md"},"integrated into your project"),", then the integrated ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/wix/DetoxInstruments/tree/master/Profiler"},"Detox Profiler framework")," will be used when profiling with Detox.")),(0,n.yg)("h2",{id:"ctrlc-does-not-clean-up-temporary-files"},(0,n.yg)("inlineCode",{parentName:"h2"},"Ctrl+C")," Does Not Clean Up Temporary Files"),(0,n.yg)("p",null,"This is a known issue. :man","_","shrugging:\nAfter you press ",(0,n.yg)("inlineCode",{parentName:"p"},"Ctrl+C")," and stop the tests, some of temporary files won\u2019t get erased (e.g. ",(0,n.yg)("inlineCode",{parentName:"p"},"/sdcard/83541_0.mp4")," on Android emulator, or ",(0,n.yg)("inlineCode",{parentName:"p"},"/private/var/folders/lm/thz8hdxs4v3fppjh0fjc2twhfl_3x2/T/f12a4fcb-0d1f-4d98-866c-e7cea4942ade.png")," on your Mac).\nIt cannot be solved on behalf of Detox itself, because the problem has to do with how Jest runner terminates its puppet processes.\nThe issue is on our radar, but the ETA for the fix stays unknown.\nIf you feel able to contribute the fix to ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/facebook/jest"},"Jest"),", you are very welcome."))}d.isMDXComponent=!0}}]);